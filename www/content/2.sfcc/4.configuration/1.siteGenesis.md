---
title: SiteGenesis
description: Customizing the code
icon: 'lucide:wrench'
toc: false
---

## Customizing the code

When customizing the ESW integration in SiteGenesis, you must ensure changes are applied to the correct cartridge and file paths. Below is an example for customizing storefront templates

**Templates**

::tabs
  ::div{label="header.isml"}
  ### File Path  
  `SiteGenesis_core/cartridge/templates/default/components/header/header.isml`

  ### Description  
  Loads ESW landing page, ESW header, app resources, and loader based on ESW module status and preferences.

  ```isml
  <isset name="eswHelper" value="${require('*/cartridge/scripts/helper/eswHelper').getEswHelper()}" scope="page"/>
  <isif condition="${eswHelper.getEShopWorldModuleEnabled() && eswHelper.getEnableLandingPage() && request.httpParameterMap.get(dw.system.Site.current.preferences.custom.eswCountryUrlParam) == false}">
    <isinclude url="${URLUtils.url('EShopWorld-GetEswLandingPage', dw.system.Site.current.getCustomPreferenceValue('eswCountryUrlParam'), pdict.CurrentHttpParameterMap.get(dw.system.Site.current.getCustomPreferenceValue('eswCountryUrlParam')))}"/>
  </isif>
  <isif condition="${eswHelper.getEShopWorldModuleEnabled()}">
    <isinclude url="${URLUtils.url('EShopWorld-GetEswHeader', 'pageContextType', pageContext.type, dw.system.Site.current.getCustomPreferenceValue('eswCountryUrlParam'), pdict.CurrentHttpParameterMap.get(dw.system.Site.current.getCustomPreferenceValue('eswCountryUrlParam')))}"/>
  </isif>
  <isif condition="${eswHelper.getEShopWorldModuleEnabled() && eswHelper.isFrontendConversionEnabled()}">
    <isinclude url="${URLUtils.url('EShopWorld-GetEswAppResources', dw.system.Site.current.getCustomPreferenceValue('eswCountryUrlParam'), pdict.CurrentHttpParameterMap.get(dw.system.Site.current.getCustomPreferenceValue('eswCountryUrlParam')))}"/>
  </isif>
  <isif condition="${eswHelper.getEShopWorldModuleEnabled() && eswHelper.isESWSupportedCountry()}">
    <i class="eshopworld-loader d-none"></i>
  </isif>
  ```
  ::

  ::div{label="footer.isml"}
  ### File Path  
  `SiteGenesis_core/cartridge/templates/default/components/footer/footer.isml`

  ### Description  
  Loads ESW footer content if the ESW module is active.

  ```isml
  <isif condition="${eswHelper.getEShopWorldModuleEnabled()}">
    <isinclude url="${URLUtils.url('EShopWorld-GetEswFooter', 'pageContextType', pageContext.type, dw.system.Site.current.getCustomPreferenceValue('eswCountryUrlParam'), pdict.CurrentHttpParameterMap.get(dw.system.Site.current.getCustomPreferenceValue('eswCountryUrlParam')))}"/>
  </isif>
  ```
  ::

  ::div{label="footer_UI.isml"}
  ### File Path  
  `SiteGenesis_core/cartridge/templates/default/components/footer/footer_UI.isml`

  ### Description  
  Injects ESW frontend scripts and styles.

  ```isml
  <script defer type="text/javascript" src="${URLUtils.staticURL('/js/EswHooks.js')}"></script>
  <link rel="stylesheet" href="${URLUtils.staticURL('/css/EswCss.css')}" />
  ```
  ::

  ::div{label="cart.isml"}
  ### File Path  
  `SiteGenesis_core/cartridge/templates/default/checkout/cart/cart.isml`

  ### Description  
  Controls checkout button and displays ESW-related messages and converted prices.

  ```isml
  <button class="button-fancy-large<isif condition="${eswHelper.getEShopWorldModuleEnabled() && eswHelper.isESWSupportedCountry()}"> btnCheckout</isif>"
    type="submit"
    value="${Resource.msg('global.checkout','locale',null)}"
    name="${pdict.CurrentForms.cart.checkoutCart.htmlName}">
    ${Resource.msg('global.checkout','locale',null)}
  </button>
  ```
  ::

  ::div{label="minicart.isml"}
  ### File Path  
  `SiteGenesis_core/cartridge/templates/default/checkout/cart/minicart.isml`

  ### Description  
  Displays ESW subtotal and checkout button when ESW is enabled.

  ```isml
  <isif condition="${eswHelper.getEShopWorldModuleEnabled()}">
    <isprint value="${eswHelper.getSubtotalObject(pdict.Basket,true)}"/>
  <iselse>
    <isprint value="${pdict.Basket.getAdjustedMerchandizeTotalPrice(false).add(pdict.Basket.giftCertificateTotalPrice)}"/>
  </isif>
  ```
  ::

  ::div{label="minilineitems.isml"}
  ### File Path  
  `SiteGenesis_core/cartridge/templates/default/checkout/components/minilineitems.isml`

  ### Description  
  Uses ESW helper to show localized mini-cart line item price.

  ```isml
  <span class="mini-cart-price">
    <isprint value="${eswHelper.getSubtotalObject(productLineItem)}"/>
  </span>
  ```
  ::

  ::div{label="orderdetails.isml"}
  ### File Path  
  `SiteGenesis_core/cartridge/templates/default/components/order/orderdetails.isml`

  ### Description  
  Renders converted ESW prices for order history and provides tracking link for ESW packages.

  ```isml
  <isscript>
    var eswHelper = require('*/cartridge/scripts/helper/eswHelper').getEswHelper();
    var formatMoney = require('dw/util/StringUtils').formatMoney;
    var eswOrderHistoryFlag = false;
    var eswModuleEnabled = eswHelper.getEShopWorldModuleEnabled();
    var isEswSupportedCountry = eswHelper.isESWSupportedCountry();
    if (eswModuleEnabled) {
      eswOrderHistoryFlag = eswHelper.isEswOrderHistory(Order);
    }
  </isscript>

  <isif condition="${eswModuleEnabled && eswOrderHistoryFlag && !empty(Order.custom.eswShopperCurrencyCode)}">
    <isprint value="${dw.value.Money(Order.custom.eswShopperCurrencyPaymentAmount, Order.custom.eswShopperCurrencyCode)}"/>
  <iselseif condition="${eswModuleEnabled && isEswSupportedCountry && !eswOrderHistoryFlag && empty(Order.custom.eswShopperCurrencyCode)}">
    <isprint value="${paymentInstr.paymentTransaction.custom.eswPaymentAmount}"/>
  <iselse>
    <isprint value="${paymentInstr.paymentTransaction.amount}"/>
  </isif>
  ```
  ::

  ::div{label="ordertotals.isml"}
  ### File Path  
  `SiteGenesis_core/cartridge/templates/default/components/order/ordertotals.isml`

  ### Description  
  Shows ESW-converted totals for order summary: subtotal, shipping, discount, tax, grand total.

  ```isml
  <isscript>
    var eswHelper = require('*/cartridge/scripts/helper/eswHelper').getEswHelper();
    var eswOrderHistoryFlag = false;
    var eswModuleEnabled = eswHelper.getEShopWorldModuleEnabled();
    var isEswSupportedCountry = eswHelper.isESWSupportedCountry();
    if (eswModuleEnabled) {
      eswOrderHistoryFlag = eswHelper.isEswOrderHistory(LineItemCtnr);
      var getOrderTotals = require('*/cartridge/scripts/helper/orderHistoryTotals').orderTotals;
    }
  </isscript>

  <isif condition="${eswModuleEnabled && eswOrderHistoryFlag}">
    <td><isprint value="${getOrderTotals(LineItemCtnr).subTotal}"/></td>
  <iselseif condition="${eswModuleEnabled && isEswSupportedCountry && !eswOrderHistoryFlag}">
    <td><isprint value="${eswHelper.getSubtotalObject(LineItemCtnr,true)}"/></td>
  <iselse>
    <td><isprint value="${LineItemCtnr.getAdjustedMerchandizeTotalPrice(false).add(LineItemCtnr.giftCertificateTotalPrice)}"/></td>
  </isif>
  ```
  ::
::

