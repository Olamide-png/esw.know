---
title: Rounding Rules
description: Configure rounding rules per country through the SFCC Business Manager.
icon: 'lucide:coins'
toc: false
---

## Rounding Prices

The **ESW-SFCC cartridge**{style="color: tomato"} enables merchants to control how prices are displayed across the storefront, shopping cart, and ESW Checkout by configuring the **ESW Rounding Rules**. <br>

These rules apply only to countries and currencies that use the **Calculated Pricing Model**.

## Implement Rounding Rules

Rounding behavior is configured within Salesforce B2C Commerce Business Manager. To define or modify rounding rules: <br>

Navigate to <code class="px-1 py-0.5 rounded bg-gray-100 dark:bg-neutral-800 text-gray-800 dark:text-gray-100 text-xs font-JetBrains Mono">Merchant Tools → Custom Objects → Custom Object Editor → ESW_PA_DATA → ESW Rounding Rules </code>

Once configured, these rules will be applied automatically to all prices calculated via the ESW Pricing Advisor, ensuring consistent price presentation across the shopper journey.

### How Rounding Rules Are Applied

The ESW Rounding Rules are automatically applied to the appropriate country and currency after the `retailerPricingFeed` job is executed. <br>

Below is a sample payload structure illustrating how rounding rules are assigned per country and currency:

```json
{
  "deliveryCountryIso": "GB",
  "roundingModels": [
    {
      "currencyIso": "GBP",
      "currencyExponent": 2,
      "direction": "Up",
      "model": "none.fixed99"
    }
  ]
},
{
  "deliveryCountryIso": "JP",
  "roundingModels": [
    {
      "currencyIso": "JPY",
      "currencyExponent": 0,
      "direction": "Nearest",
      "model": "multiple1000.none"
    }
  ]
}
```
<br>

::field-group
  ::field{name="deliveryCountryIso" type="string" required}
  ISO code of the shopper’s delivery country.
  ::

  ::field{name="currencyIso" type="string" required}
  Currency to which the rounding rule applies.  e.g., `GBP`, `JPY`
  ::

  ::field{name="currencyExponent" type="integer" required}
  Number of decimal places used e.g., `2` for GBP
  ::

  ::field{name="direction" type="enum" values="Up, Down, Nearest" required}
  Rounding direction `Up`, `Down`, `Nearest`
  ::

  ::field{name="model" type="string" required}
  Indicates the rounding model that will be applied to product price within ESW Rounding Methods e.g., `Fixed`, `Multiple`, and `None`. For the `multiple1000.none` or `none.fixed99` rounding models, the rounding methods are `Fixed`, `Multiple` and `None`
  ::
::

**Multiple Currency Rounding Rules per Country**

```json
{
  "deliveryCountryIso": "FR",
  "roundingModels": [
    {
      "currencyIso": "EUR",
      "currencyExponent": 2,
      "direction": "Up",
      "model": "none.none"
    },
    {
      "currencyIso": "GBP",
      "currencyExponent": 2,
      "direction": "Down",
      "model": "none.fixed99"
    }
  ]
}
```

## Model Rules

The following model rules govern how price values are adjusted based on the relationship between the currency exponent and the number of digits defined in the rounding model:

**Truncate**

If the number of digits in the rounding model exceeds the number of digits allowed by the currency exponent, the extra digits are truncated. <br>

**Extend**

If the currency exponent allows more digits than the rounding model specifies, the model is extended with trailing zeros.

<br>

**Parameters and Values**

| Parameter                         | Value   |
|-----------------------------------|---------|
| Shipping country                  | France  |
| Base currency                     | EUR     |
| Price book currency               | EUR     |
| Shopper currency                  | GBP     |
| Product price in the price book   | EUR 100 |
| Uplift                            | 3%      |
| Duty                              | 7%      |
| Tax                               | 20%     |
| FX Rate (EUR – GBP)               | 0.8313  |

<br>

Based on these values, the calculated price will be `109.9410876` GBP.

Calculated as: Price of product in price book x Uplift x Duty x Tax x FX rate <br>
= `100 x 1.03 x 1.07 x 1.2 x 0.8313` <br>
= `109.9410876`.

ESW rounding rules applied to the calculated price.

## Rounding rules and examples

### Rounding Method: `none`

```json
{"currencyIso":"GBP","currencyExponent":2,"direction":"Up","model":"none.none"}
```
<br>

Based on this, `109.9410876` GBP is displayed as `109.94` GBP on the storefront.


### Rounding Method: `fixed`

```json
{"currencyIso":"GBP", "currencyExponent":2, "direction":"Up", "model":"none.fixed25"}
```

Based on this, `109.9410876` GBP is displayed as `110.25` GBP on the storefront, and the shipping cost `27.49` is displayed as `28.25` GBP in the cart.

### Rounding Method: `multiple`

```json
{"currencyIso":"JPY","currencyExponent":0,"direction":"Nearest","model":"multiple1000.none"}
```

When the `multiple1000` rounding logic is applied, ``14713/1000 = 14.7 > Nearest > 15 > 15 x 1000`` <br>
= `15000`

> The difference in product prices before and after the rounding model is applied is recorded at the order product line item level as the **ESW Delta Rounding Value**.

## ESW Rounding Rules Matrix

| Currency Exponent | Direction | Exponent Rounding (Fixed) | Exponent Rounding (Multiple) | Exponent Rounding (None) | Whole Number Rounding (Fixed) | Whole Number Rounding (Multiple) | Whole Number Rounding (None) |
|---|---|---|---|---|---|---|---|
| 0 | Up      | N/A       | N/A       | N/A       | Supported | Supported | Supported |
| 0 | Down    | N/A       | N/A       | N/A       | Supported | Supported | Supported |
| 0 | Nearest | N/A       | N/A       | N/A       | Supported | Supported | Supported |
| 2 | Up      | Supported | Supported | Supported | Supported | Supported | Supported |
| 2 | Down    | Supported | Supported | Supported | Supported | Supported | Supported |
| 2 | Nearest | Supported | Supported | Supported | Supported | Supported | Supported |