---
title: Overview
description: Checkout Integration Overview
icon: 'lucide:binoculars'
toc: false
---

The ESW Checkout page is displayed when shoppers click Checkout on the Cart page. On the ESW Checkout page, shoppers can enter their delivery address, contact details, and payment details. Shoppers can also select their preferred shipping method.

## SFCC Cartridge and ESW Checkout

The following diagram explains the workflow between the ESW-SFCC cartridge and ESW Checkout.

::div{class="p-4"}
  ![Image](/CheckoutIntegrationDrawing2.png)
::

1. The retailer installs the ESW SFCC Cartridge and configures it using the tenant details provided by ESW.

2. The shopper visits the retailer site where the shopper's country and localized product prices are set automatically through GeoIP lookup. The localized prices are native to SFCC and taken from the price book.

::alert{type="secondary" icon="lucide:info"}
  ESW also supports dynamic price conversion through the Pricing Advisor feed. In dynamic price conversion, the product prices are synchronized daily.
::

3. The shopper adds an item to the cart, applies a discount through SFCC, and clicks **Checkout**. They are then presented with two checkout options - a forced login and optional guest checkout.

4. Checkout disclaimer message under the checkout button can be enabled through `esw-checkout-disclaimer-message` content asset which will be imported in the content library once you import site metadata. The checkout disclaimer message can be enabled/disabled through the content asset by turning the online flag on or off.

5.  When the shopper selects either of two checkout options, the order is created in SFCC (Order Status = `Created`). The cart and shopper data is also sent to ESW in the Checkout API request and the ESW Checkout is created based on the data that is received.

::alert{type="info" icon="lucide:info"}
  The ESW checkout supports only the valid locales with Language ISO and Country ISO in the Checkout API call, for example, 'en-US' or 'fr-FR'. In SFCC, these locales exist with an underscore ( _ ). <br>
  
  The ESW cartridge replaces the underscore ( _ ) with a hyphen ( - ) in the request. The retailers must ensure that locales are configured correctly with proper Language ISO and Country ISO.
::


6. A response URL is sent back to SFCC. This URL redirects the shopper to the ESW hosted checkout. If the shopper is logged in, the checkout page is prepopulated with their details, for instance, address.

7. On the ESW checkout page, the shopper performs actions, like enters their shipping and billing details, selects a delivery method, selects a payment method, and enters their payment details.

8. The payment is processed through the ESW system and an order confirmation request is sent to SFCC.

9. The order status is updated from `Created` to `New` in SFCC. The order breakdown is saved, which includes tax, duty, and shipping in the shopper and retailer currency.

10. After receiving a success message from SFCC, an order confirmation message is displayed to the shopper on the ESW checkout.

### Storefront Workflow

::div{class="p-4"}
  ![Image](/CheckoutWorkflowDiagram1(1).png)
::

### Checkout and SFCC

- **Logged-in shoppers:** If a shopper is logged in before the cart’s checkout redirection, the cartridge transfers the shopper’s most recent saved address to the ESW checkout, provided that the shopper is shopping from the same country. At the checkout, the shopper is presented with a checkbox to save the address in case the shopper is using a new address. Once the order is placed, the new address is added to the shopper's address book and also marked as the default address. As a result, it is also auto-populated on the shopper’s next checkout in the same country.

::alert{type="secondary" icon="lucide:info"}
  The cartridge creates the stored cards validation cookie that only works for the same SFCC and ESW checkout top-level domains –`.retailersurl.com`.
::

::div{class="p-4"}
  ![Image](/Logged-InShopper_CheckoutConfig.png)
::

- **Guest shoppers:** For guest shoppers (that is, shoppers who are not logged in), the ESW cartridge uses faux shopper details to place the order in SFCC. Faux details are then replaced with the actual shopper details once the order is confirmed back into SFCC from the ESW Checkout.

### Shopper Exit Scenarios
The following is the list of scenarios where the shoppers can exit from ESW checkout:

| Scenario                                       | Description                                                                                                                                                                                                 | Cart Retention | Storefront cart behaviour                                                                                                                                                                      |
|-----------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Shoppers close the browser                    | When shoppers abandon the ESW checkout page by closing the browser tab or window.                                                                                                                          | Yes            | Storefront cart will be repopulated with order items until the SFCC storefront session is expired.                                                                                             |
| Shoppers click the **Back** button            | On clicking the browser back button, shoppers are redirected to the cart page and exit from ESW checkout.                                                                                                  | Yes            | Storefront cart will be repopulated with order items until the SFCC storefront session is expired.                                                                                             |
| Shoppers allow session to time out            | Shoppers see a message that they are being navigated back to the cart after session timeout. Session timeout by default is 20 minutes, but is configurable via SFCC configurations.                       | Yes            | Storefront cart will be repopulated with order items until the SFCC storefront session is expired.                                                                                             |
| Shoppers successfully complete the checkout   | On successful order completion, shoppers exit ESW checkout and are redirected to the order confirmation page.                                                                                              | No             | Storefront cart will be destroyed because the order is placed successfully, so the cart will be empty in this scenario.                                                                        |
| Shoppers click the logo in the header         | On clicking the logo in the header, shoppers exit ESW checkout and are redirected to the SFCC storefront.                                                                                                  | Yes            | Shopper is redirected to the homepage and the cart will be repopulated with the order items until the SFCC storefront session is expired.                                                     |
| Shoppers click the **Back to Cart** CTA      | On clicking the **Back to Cart** button, shoppers are taken to the landing page where they can alter their cart.                                                                                           | Yes            | Storefront cart will be repopulated with the order items until the SFCC storefront session is expired.                                                                                        |
| Inventory check failure                       | If the **inventory check** feature is enabled and ordered item(s) are unavailable or out of stock during order confirmation, shoppers are redirected back to the cart page.                               | Yes            | Storefront cart will be repopulated with the order items and an “out of stock” item error message, until the SFCC storefront session is expired.                                             |
